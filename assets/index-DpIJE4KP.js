import{b as Y,i as ee,d as V,a as J,u as te,r as E,c as I,T as R,o as oe,e as se,f as h,g as x,w as m,h as D,j as y,n as b,k as r,l as U,E as A,m as ne,p as F,t as K,q as ae,s as M,F as le,v as O,x as ie,y as g,z as re,_ as ue,C as de,A as ce,B,D as fe,G as L,H as q,I as pe,J as j,K as me,L as ve,M as ge,N as ye,O as G,P as W,Q as _e,R as Z,S as Ce,U as he,V as be,W as we,X as Se,Y as ke}from"./index-CQQPOUkP.js";const Q=["success","info","warning","error"],Ie=Y({customClass:{type:String,default:""},dangerouslyUseHTMLString:{type:Boolean,default:!1},duration:{type:Number,default:4500},icon:{type:ee},id:{type:String,default:""},message:{type:V([String,Object]),default:""},offset:{type:Number,default:0},onClick:{type:V(Function),default:()=>{}},onClose:{type:V(Function),required:!0},position:{type:String,values:["top-right","top-left","bottom-right","bottom-left"],default:"top-right"},showClose:{type:Boolean,default:!0},title:{type:String,default:""},type:{type:String,values:[...Q,""],default:""},zIndex:Number}),Ee={destroy:()=>!0},Te=["id"],$e=["textContent"],xe={key:0},Ne=["innerHTML"],Ve=J({name:"ElNotification"}),Fe=J({...Ve,props:Ie,emits:Ee,setup(e,{expose:a}){const s=e,{ns:o,zIndex:c}=te("notification"),{nextZIndex:u,currentZIndex:_}=c,{Close:d}=de,l=E(!1);let i;const f=I(()=>{const t=s.type;return t&&R[s.type]?o.m(t):""}),v=I(()=>s.type&&R[s.type]||s.icon),n=I(()=>s.position.endsWith("right")?"right":"left"),C=I(()=>s.position.startsWith("top")?"top":"bottom"),w=I(()=>{var t;return{[C.value]:`${s.offset}px`,zIndex:(t=s.zIndex)!=null?t:_.value}});function k(){s.duration>0&&({stop:i}=ce(()=>{l.value&&p()},s.duration))}function T(){i==null||i()}function p(){l.value=!1}function X({code:t}){t===B.delete||t===B.backspace?T():t===B.esc?l.value&&p():k()}return oe(()=>{k(),u(),l.value=!0}),se(document,"keydown",X),a({visible:l,close:p}),(t,$)=>(h(),x(re,{name:r(o).b("fade"),onBeforeLeave:t.onClose,onAfterLeave:$[1]||($[1]=H=>t.$emit("destroy")),persisted:""},{default:m(()=>[D(y("div",{id:t.id,class:b([r(o).b(),t.customClass,r(n)]),style:U(r(w)),role:"alert",onMouseenter:T,onMouseleave:k,onClick:$[0]||($[0]=(...H)=>t.onClick&&t.onClick(...H))},[r(v)?(h(),x(r(A),{key:0,class:b([r(o).e("icon"),r(f)])},{default:m(()=>[(h(),x(ne(r(v))))]),_:1},8,["class"])):F("v-if",!0),y("div",{class:b(r(o).e("group"))},[y("h2",{class:b(r(o).e("title")),textContent:K(t.title)},null,10,$e),D(y("div",{class:b(r(o).e("content")),style:U(t.title?void 0:{margin:0})},[ae(t.$slots,"default",{},()=>[t.dangerouslyUseHTMLString?(h(),M(le,{key:1},[F(" Caution here, message could've been compromised, never use user's input as message "),y("p",{innerHTML:t.message},null,8,Ne)],2112)):(h(),M("p",xe,K(t.message),1))])],6),[[O,t.message]]),t.showClose?(h(),x(r(A),{key:0,class:b(r(o).e("closeBtn")),onClick:ie(p,["stop"])},{default:m(()=>[g(r(d))]),_:1},8,["class","onClick"])):F("v-if",!0)],2)],46,Te),[[O,l.value]])]),_:3},8,["name","onBeforeLeave"]))}});var Be=ue(Fe,[["__file","notification.vue"]]);const N={"top-left":[],"top-right":[],"bottom-left":[],"bottom-right":[]},P=16;let Me=1;const S=function(e={},a=null){if(!fe)return{close:()=>{}};(typeof e=="string"||L(e))&&(e={message:e});const s=e.position||"top-right";let o=e.offset||0;N[s].forEach(({vm:f})=>{var v;o+=(((v=f.el)==null?void 0:v.offsetHeight)||0)+P}),o+=P;const c=`notification_${Me++}`,u=e.onClose,_={...e,offset:o,id:c,onClose:()=>{Le(c,s,u)}};let d=document.body;q(e.appendTo)?d=e.appendTo:pe(e.appendTo)&&(d=document.querySelector(e.appendTo)),q(d)||(d=document.body);const l=document.createElement("div"),i=g(Be,_,L(_.message)?{default:()=>_.message}:null);return i.appContext=a??S._context,i.props.onDestroy=()=>{j(null,l)},j(i,l),N[s].push({vm:i}),d.appendChild(l.firstElementChild),{close:()=>{i.component.exposed.visible.value=!1}}};Q.forEach(e=>{S[e]=(a={})=>((typeof a=="string"||L(a))&&(a={message:a}),S({...a,type:e}))});function Le(e,a,s){const o=N[a],c=o.findIndex(({vm:i})=>{var f;return((f=i.component)==null?void 0:f.props.id)===e});if(c===-1)return;const{vm:u}=o[c];if(!u)return;s==null||s(u);const _=u.el.offsetHeight,d=a.split("-")[0];o.splice(c,1);const l=o.length;if(!(l<1))for(let i=c;i<l;i++){const{el:f,component:v}=o[i].vm,n=Number.parseInt(f.style[d],10)-_-P;v.props.offset=n}}function Pe(){for(const e of Object.values(N))e.forEach(({vm:a})=>{a.component.exposed.visible.value=!1})}S.closeAll=Pe;S._context=null;const ze=me(S,"$notify"),z=e=>(Se("data-v-d49fd05d"),e=e(),ke(),e),He={class:"login__form__wrap"},Re=z(()=>y("h1",{class:"login__title"},"登录",-1)),De=z(()=>y("i",{class:"fa-solid fa-user"},null,-1)),Ue=z(()=>y("i",{class:"fa-solid fa-lock"},null,-1)),Ae={__name:"index",setup(e){const a=ge(),s=ye(),o=E(),c=E(),u=G({username:"admin",password:"admin"}),_=G({username:[{required:!0,message:"请输入用户名",trigger:"blur"}]}),d=E(!0),l=E(!1),i={backgroundImage:`linear-gradient(45deg ,${W()}, ${W()})`},f=async v=>{v&&await v.validate(async(n,C)=>{if(n)try{l.value=!0,await a.login(u),await s.replace({path:"/"}),ze({type:"success",message:"登录成功"})}catch(w){c.value.validateState="error",c.value.validateMessage=w.message}finally{l.value=!1}})};return(v,n)=>{const C=he,w=be,k=we,T=_e;return h(),M("div",{class:"page-login",style:i},[y("div",He,[g(T,{class:"login__form",ref_key:"loginFormRef",ref:o,model:u,rules:_},{default:m(()=>[g(C,null,{default:m(()=>[Re]),_:1}),g(C,{prop:"username"},{default:m(()=>[g(w,{class:"login__username",modelValue:u.username,"onUpdate:modelValue":n[0]||(n[0]=p=>u.username=p),placeholder:"请输入用户名",autofocus:"",onKeyup:n[1]||(n[1]=Z(p=>f(o.value),["enter"]))},{prefix:m(()=>[De]),_:1},8,["modelValue"])]),_:1}),g(C,{prop:"password",ref_key:"passwordItemRef",ref:c},{default:m(()=>[g(w,{class:"login__password",modelValue:u.password,"onUpdate:modelValue":n[3]||(n[3]=p=>u.password=p),type:d.value?"password":"text",placeholder:"任意密码",onKeyup:n[4]||(n[4]=Z(p=>f(o.value),["enter"]))},{prefix:m(()=>[Ue]),suffix:m(()=>[y("i",{class:b(["pointer","fa-solid",d.value?"fa-eye-slash":"fa-eye"]),onClick:n[2]||(n[2]=p=>d.value=!d.value)},null,2)]),_:1},8,["modelValue","type"])]),_:1},512),g(C,null,{default:m(()=>[g(k,{class:"login__btn",onClick:n[5]||(n[5]=p=>f(o.value)),loading:l.value},{default:m(()=>[Ce("登录")]),_:1},8,["loading"])]),_:1})]),_:1},8,["model","rules"])])])}}},Oe=ve(Ae,[["__scopeId","data-v-d49fd05d"]]);export{Oe as default};
