import{$ as _,a as w,a0 as U,r as V,a1 as k,o as N,a2 as R,a3 as q,a4 as F,a5 as E,a6 as K,f as A,s as D,y as I,k as p,l as T,j as H,t as $,a7 as G}from"./index-CQQPOUkP.js";var Y=["onActivate","onAddUndo","onBeforeAddUndo","onBeforeExecCommand","onBeforeGetContent","onBeforeRenderUI","onBeforeSetContent","onBeforePaste","onBlur","onChange","onClearUndos","onClick","onContextMenu","onCopy","onCut","onDblclick","onDeactivate","onDirty","onDrag","onDragDrop","onDragEnd","onDragGesture","onDragOver","onDrop","onExecCommand","onFocus","onFocusIn","onFocusOut","onGetContent","onHide","onInit","onKeyDown","onKeyPress","onKeyUp","onLoadContent","onMouseDown","onMouseEnter","onMouseLeave","onMouseMove","onMouseOut","onMouseOver","onMouseUp","onNodeChange","onObjectResizeStart","onObjectResized","onObjectSelected","onPaste","onPostProcess","onPostRender","onPreProcess","onProgressState","onRedo","onRemove","onReset","onSaveContent","onSelectionChange","onSetAttrib","onSetContent","onShow","onSubmit","onUndo","onVisualAid"],W=function(e){return Y.map(function(t){return t.toLowerCase()}).indexOf(e.toLowerCase())!==-1},J=function(e,t,n){Object.keys(t).filter(W).forEach(function(i){var o=t[i];typeof o=="function"&&(i==="onInit"?o(e,n):n.on(i.substring(2),function(l){return o(l,n)}))})},Q=function(e,t,n,i){var o=e.modelEvents?e.modelEvents:null,l=Array.isArray(o)?o.join(" "):o;_(i,function(u,r){n&&typeof u=="string"&&u!==r&&u!==n.getContent({format:e.outputFormat})&&n.setContent(u)}),n.on(l||"change input undo redo",function(){t.emit("update:modelValue",n.getContent({format:e.outputFormat}))})},X=function(e,t,n,i,o,l){i.setContent(l()),n.attrs["onUpdate:modelValue"]&&Q(t,n,i,o),J(e,n.attrs,i)},x=0,O=function(e){var t=Date.now(),n=Math.floor(Math.random()*1e9);return x++,e+"_"+n+x+String(t)},Z=function(e){return e!==null&&e.tagName.toLowerCase()==="textarea"},B=function(e){return typeof e>"u"||e===""?[]:Array.isArray(e)?e:e.split(" ")},ee=function(e,t){return B(e).concat(B(t))},ne=function(e){return e==null},j=function(){return{listeners:[],scriptId:O("tiny-script"),scriptLoaded:!1}},te=function(){var e=j(),t=function(o,l,u,r){var a=l.createElement("script");a.referrerPolicy="origin",a.type="application/javascript",a.id=o,a.src=u;var f=function(){a.removeEventListener("load",f),r()};a.addEventListener("load",f),l.head&&l.head.appendChild(a)},n=function(o,l,u){e.scriptLoaded?u():(e.listeners.push(u),o.getElementById(e.scriptId)||t(e.scriptId,o,l,function(){e.listeners.forEach(function(r){return r()}),e.scriptLoaded=!0}))},i=function(){e=j()};return{load:n,reinitialize:i}},ae=te(),ie=function(){return typeof window<"u"?window:global},m=function(){var e=ie();return e&&e.tinymce?e.tinymce:null},oe={apiKey:String,cloudChannel:String,id:String,init:Object,initialValue:String,inline:Boolean,modelEvents:[String,Array],plugins:[String,Array],tagName:String,toolbar:[String,Array],modelValue:String,disabled:Boolean,tinymceScriptSrc:String,outputFormat:{type:String,validator:function(e){return e==="html"||e==="text"}}},c=function(){return c=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e},c.apply(this,arguments)},re=function(e,t,n,i){return e(i||"div",{id:t,ref:n})},le=function(e,t,n){return e("textarea",{id:t,visibility:"hidden",ref:n})},C={selector:void 0,target:void 0},ue=w({props:oe,setup:function(e,t){var n=e.init?c(c({},e.init),C):c({},C),i=U(e),o=i.disabled,l=i.modelValue,u=i.tagName,r=V(null),a=null,f=e.id||O("tiny-vue"),b=e.init&&e.init.inline||e.inline,h=!!t.attrs["onUpdate:modelValue"],S=!0,P=e.initialValue?e.initialValue:"",y="",z=function(s){return h?function(){return l!=null&&l.value?l.value:""}:function(){return s?P:y}},g=function(){var s=z(S),d=c(c({},n),{readonly:e.disabled,target:r.value,plugins:ee(n.plugins,e.plugins),toolbar:e.toolbar||n.toolbar,inline:b,setup:function(v){a=v,v.on("init",function(L){return X(L,e,t,v,l,s)}),typeof n.setup=="function"&&n.setup(v)}});Z(r.value)&&(r.value.style.visibility=""),m().init(d),S=!1};_(o,function(s){var d;a!==null&&(typeof((d=a.mode)===null||d===void 0?void 0:d.set)=="function"?a.mode.set(s?"readonly":"design"):a.setMode(s?"readonly":"design"))}),_(u,function(s){var d;h||(y=a.getContent()),(d=m())===null||d===void 0||d.remove(a),k(function(){return g()})}),N(function(){if(m()!==null)g();else if(r.value&&r.value.ownerDocument){var s=e.cloudChannel?e.cloudChannel:"6",d=e.apiKey?e.apiKey:"no-api-key",v=ne(e.tinymceScriptSrc)?"https://cdn.tiny.cloud/1/".concat(d,"/tinymce/").concat(s,"/tinymce.min.js"):e.tinymceScriptSrc;ae.load(r.value.ownerDocument,v,g)}}),R(function(){m()!==null&&m().remove(a)}),b||(q(function(){S||g()}),F(function(){var s;h||(y=a.getContent()),(s=m())===null||s===void 0||s.remove(a)}));var M=function(s){var d;y=a.getContent(),(d=m())===null||d===void 0||d.remove(a),n=c(c(c({},n),s),C),k(function(){return g()})};return t.expose({rerender:M,getEditor:function(){return a}}),function(){return b?re(E,f,r,e.tagName):le(E,f,r)}}});const se=K(),de=()=>se.lang==="zh"?"zh_CN":"en",ce="64mjv027yic3xknhs3h7m1r84i03e1r1axyzog5514kd3xih";async function fe(e,t){console.log(e)}const me={placeholder:"",plugins:"quickbars lists advlist link table",height:500,resize:!1,menubar:!1,toolbar_mode:"sliding",toolbar:`undo redo |
            blocks fontfamily fontsize |
            bold italic forecolor backcolor |
            alignleft aligncenter alignright alignjustify |
            bullist numlist outdent indent |
            link quickimage quicktable |
            removeformat`,quickbars_selection_toolbar:"bold italic quicklink quickimage quicktable",statusbar:!0,elementpath:!0,branding:!1,language:de(),font_family_formats:`微软雅黑=Microsoft YaHei;
                        苹果苹方=PingFang SC;
                        宋体=simsun, serif;
                        仿宋体=FangSong, serif;
                        黑体=SimHei, sans-serif;
                        Arial=arial, helvetica, sans-serif;
                        Arial Black=arial black, avant garde;
                        Times New Roman=times new roman, times;`,font_size_formats:"14px 16px 18px 20px 24px 26px 28px 30px 32px 36px",paste_data_images:!0,smart_paste:!0,object_resizing:!0,resize_img_proportional:!0,image_caption:!0,image_advtab:!0,image_description:!0,image_dimensions:!0,image_title:!0,image_uploadtab:!0,images_upload_handler:fe},ve=w({name:"Tinymce"}),ge=Object.assign(ve,{props:{modelValue:{type:String,default:""},config:{type:Object,default:()=>({})},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","init","change","blur"],setup(e,{emit:t}){const n=e,i=t,o=V({...me,...n.config}),l=(u,r)=>{console.log(`${r.id} init!`),i("init",u,r)};return(u,r)=>(A(),D("div",{class:"tinymce-container",style:T({height:o.value.height+"px"})},[I(p(ue),{modelValue:e.modelValue,"onUpdate:modelValue":r[0]||(r[0]=a=>u.$emit("update:modelValue",a)),"api-key":p(ce),init:o.value,disabled:e.disabled,onInit:l,onChange:r[1]||(r[1]=(a,f)=>u.$emit("change",a,f)),onBlur:r[2]||(r[2]=(a,f)=>u.$emit("blur",a,f))},null,8,["modelValue","api-key","init","disabled"])],4))}}),ye={class:"example-page"},be={__name:"tinymce",setup(e){const t=V("");return(n,i)=>(A(),D("div",ye,[H("p",null,$(p(t)),1),I(ge,{modelValue:p(t),"onUpdate:modelValue":i[0]||(i[0]=o=>G(t)?t.value=o:null)},null,8,["modelValue"])]))}};export{be as default};
